<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lectio Divina Mormonis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Times New Roman', 'Crimson Text', Georgia, serif;
            background: linear-gradient(135deg, #8b7355 0%, #5d4e37 50%, #3e2723 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        
        .main-container {
            width: 100%;
            max-width: 768px;
            background: linear-gradient(145deg, #f5f1e8 0%, #e8dcc6 100%);
            border: 3px solid #8b7355;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
            padding: 32px 40px;
        }
        
        .selector-page {
            text-align: center;
        }
        
        .main-title {
            font-size: 2.8rem;
            font-weight: 400;
            color: #3e2723;
            margin-bottom: 8px;
            font-variant: small-caps;
            text-shadow: 1px 1px 2px rgba(139, 115, 85, 0.3);
        }
        
        .main-title::after {
            content: '';
            display: block;
            width: 200px;
            height: 2px;
            background: linear-gradient(to right, transparent, #8b7355, transparent);
            margin: 12px auto;
        }
        
        .subtitle {
            color: #5d4e37;
            margin-bottom: 32px;
            font-style: italic;
            font-size: 1.1rem;
            text-align: center;
            font-weight: 300;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            text-align: left;
        }
        
        .form-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #3e2723;
            margin-bottom: 6px;
            font-variant: small-caps;
            letter-spacing: 0.02em;
        }
        
        .form-select {
            border-radius: 4px;
            border: 2px solid #8b7355;
            background: linear-gradient(145deg, #f5f1e8, #e8dcc6);
            padding: 10px 14px;
            font-family: 'Times New Roman', serif;
            font-size: 1rem;
            color: #3e2723;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%235d4e37' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 10px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 35px;
        }
        
        .start-button {
            border-radius: 6px;
            padding: 14px 24px;
            font-weight: 600;
            background: linear-gradient(145deg, #8b7355, #5d4e37);
            color: #f5f1e8;
            border: 2px solid #3e2723;
            cursor: pointer;
            margin-right: 12px;
            font-family: 'Times New Roman', serif;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .start-button:hover {
            background: linear-gradient(145deg, #5d4e37, #3e2723);
            transform: translateY(-1px);
        }
        
        .help-text {
            font-size: 0.875rem;
            color: #5d4e37;
            font-style: italic;
        }
        
        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.75rem;
            color: #8b7355;
            font-style: italic;
            line-height: 1.4;
        }
        
        .footer a {
            color: #5d4e37;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer a:hover {
            color: #3e2723;
            text-decoration: underline;
        }
        
        .disclaimer {
            margin-top: 8px;
            font-size: 0.7rem;
            color: #8b7355;
        }
        
        .lectio-page {
            display: none;
            text-align: left;
        }
        
        .nav-bar {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .back-button {
            border-radius: 4px;
            border: 2px solid #8b7355;
            padding: 8px 16px;
            font-size: 0.9rem;
            color: #3e2723;
            background: linear-gradient(145deg, #f5f1e8, #e8dcc6);
            cursor: pointer;
            font-family: 'Times New Roman', serif;
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .back-button:hover {
            background: linear-gradient(145deg, #e8dcc6, #d4c4a8);
            transform: translateY(-1px);
        }
        
        .lectio-header h2 {
            font-size: 2.2rem;
            font-weight: 400;
            color: #3e2723;
            margin-bottom: 8px;
            font-variant: small-caps;
            text-shadow: 1px 1px 2px rgba(139, 115, 85, 0.3);
        }
        
        .lectio-header p {
            color: #5d4e37;
            margin-bottom: 24px;
            font-style: italic;
            font-size: 1rem;
        }
        
        .method-text {
            font-weight: 600;
            color: #3e2723;
        }

        /* RESOURCE SECTIONS - COMPLETELY NEW */
        .resources-container {
            margin-bottom: 32px;
        }

        .resource-category {
            margin-bottom: 32px;
            background: linear-gradient(145deg, rgba(139, 115, 85, 0.08), rgba(93, 78, 55, 0.05));
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(139, 115, 85, 0.2);
        }

        .resource-category:last-child {
            margin-bottom: 0;
        }

        .category-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #3e2723;
            margin-bottom: 16px;
            font-variant: small-caps;
            letter-spacing: 0.03em;
            text-transform: uppercase;
            border-bottom: 2px solid #8b7355;
            padding-bottom: 8px;
            display: block;
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .resource-button {
            border-radius: 6px;
            padding: 12px 20px;
            color: #f5f1e8;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-family: 'Times New Roman', serif;
            border: 1px solid rgba(0, 0, 0, 0.2);
            font-size: 0.95rem;
            transition: transform 0.2s ease;
        }
        
        .resource-button:hover {
            transform: translateY(-2px);
        }
        
        .gospel-library { 
            background: linear-gradient(145deg, #2d5016, #1a3009);
        }
        
        .book-harder { 
            background: linear-gradient(145deg, #4a3728, #2d1f16);
        }
        
        .book-online { 
            background: linear-gradient(145deg, #1e3a5f, #0f1d30);
        }
        
        .mynoise { 
            background: linear-gradient(145deg, #4c1d95, #3730a3);
        }
        
        .chatgpt { 
            background: linear-gradient(145deg, #10a37f, #0d8b6b);
        }
        
        .learning-to-love { 
            background: linear-gradient(145deg, #059669, #047857);
        }
        
        .seminary-manual { 
            background: linear-gradient(145deg, #40a444, #2d7a30);
        }

        .student-manual {
            background: linear-gradient(145deg, #6d4c41, #4e342e);
        }

        .book-of-mormon-central {
            background: linear-gradient(145deg, #004aad, #002f6c);
        }

        .scripture-citation-index {
             background: linear-gradient(145deg, #a52a2a, #800000);
        }

        .tabernacle-choir {
             background: linear-gradient(145deg, #b8860b, #8b4513);
        }
        
        .ldsbot {
             background: linear-gradient(145deg, #5b21b6, #4c1d95);
        }
        
        .come-follow-me-manual {
            background: linear-gradient(145deg, #003366, #001f3f);
        }
        
        .study-section {
            margin-top: 32px;
            background: linear-gradient(145deg, rgba(139, 115, 85, 0.15), rgba(93, 78, 55, 0.1));
            padding: 24px;
            border-radius: 8px;
            border: 2px solid #c4a574;
        }
        
        .study-section h3 {
            color: #3e2723;
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
            text-align: center;
            font-variant: small-caps;
            letter-spacing: 0.02em;
            text-shadow: 1px 1px 2px rgba(139, 115, 85, 0.3);
        }
        
        .lectio-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .lectio-step {
            background: linear-gradient(145deg, #f5f1e8, #e8dcc6);
            padding: 24px;
            border-radius: 6px;
            border: 2px solid #8b7355;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .lectio-step h4 {
            color: #3e2723;
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 1.15rem;
            font-variant: small-caps;
            letter-spacing: 0.01em;
        }
        
        .lectio-step p {
            color: #5d4e37;
            font-size: 0.95rem;
            line-height: 1.6;
            font-style: italic;
        }
        
        @media (max-width: 640px) {
            .main-container {
                padding: 16px 24px;
            }
            
            .main-title {
                font-size: 2rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .category-buttons {
                flex-direction: column;
            }
            
            .lectio-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="selector-page" id="selector-page">
            <header>
                <h1 class="main-title">Lectio Divina Mormonis</h1>
                <p class="subtitle">Mormon's Divine Reading - Book of Mormon study tools</p>
            </header>

            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Book</label>
                    <select id="book-select" class="form-select"></select>
                </div>

                <div class="form-group">
                    <label class="form-label">Chapter</label>
                    <select id="chapter-select" class="form-select"></select>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 12px; margin-top: 24px;">
                <button id="start-lectio" class="start-button" onclick="startLectio()">
                    Start Lectio
                </button>
                <small class="help-text">A dedicated Lectio page will open for your selection.</small>
            </div>

            <footer class="footer">
                ¬© 2025 <a href="https://calebday.com" target="_blank" rel="noopener noreferrer">Caleb Day</a>
                <div class="disclaimer">Mormonis is not affiliated with The Church of Jesus Christ of Latter-day Saints.</div>
            </footer>
        </div>

        <div class="lectio-page" id="lectio-page">
            <nav class="nav-bar">
                <button class="back-button" onclick="backToSelector()">
                    ‚Üê Back to selector
                </button>
            </nav>

            <header class="lectio-header">
                <h2 id="lectio-title">Chapter ‚Äî Lectio</h2>
                <p>Use the classic flow: <span class="method-text">Narrative</span> (Literal), <span class="method-text">Allegory</span> (Symbols), <span class="method-text">Reflection</span> (Personal), <span class="method-text">Invitation</span> (Action).</p>
            </header>

            <div class="resources-container" id="resources-container">
                </div>

            <div class="study-section">
                <h3>4 Steps of Lectio Divina</h3>
                <div class="lectio-steps">
                    <div class="lectio-step">
                        <h4>üìñ Narrative</h4>
                        <p>Literal meaning: what is happening in the story.</p>
                    </div>
                    <div class="lectio-step">
                        <h4>üîç Allegory</h4>
                        <p>Metaphors, symbols, or deeper meanings.</p>
                    </div>
                    <div class="lectio-step">
                        <h4>üí≠ Reflection</h4>
                        <p>What does this text say to me personally right now?</p>
                    </div>
                    <div class="lectio-step">
                        <h4>üéØ Invitation</h4>
                        <p>What action will I take in response to this reading?</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Book of Mormon data
        const BOM_BOOKS = [
            { name: "1 Nephi", slug: "1-ne", chapters: 22 },
            { name: "2 Nephi", slug: "2-ne", chapters: 33 },
            { name: "Jacob", slug: "jacob", chapters: 7 },
            { name: "Enos", slug: "enos", chapters: 1 },
            { name: "Jarom", slug: "jarom", chapters: 1 },
            { name: "Omni", slug: "omni", chapters: 1 },
            { name: "Words of Mormon", slug: "w-of-m", chapters: 1 },
            { name: "Mosiah", slug: "mosiah", chapters: 29 },
            { name: "Alma", slug: "alma", chapters: 63 },
            { name: "Helaman", slug: "hel", chapters: 16 },
            { name: "3 Nephi", slug: "3-ne", chapters: 30 },
            { name: "4 Nephi", slug: "4-ne", chapters: 1 },
            { name: "Mormon", slug: "morm", chapters: 9 },
            { name: "Ether", slug: "ether", chapters: 15 },
            { name: "Moroni", slug: "moro", chapters: 10 }
        ];

        // Lesson to PDF page mapping
        const LESSON_PAGES = [
            { range: [{ slug: "1-ne", chapters: [1,2,3,4,5,6,7] }], page: 28 },
            { range: [{ slug: "1-ne", chapters: [8,9,10,11,12,15] }], page: 36 },
            { range: [{ slug: "1-ne", chapters: [12,13,14] }], page: 44 },
            { range: [{ slug: "1-ne", chapters: [16,17,18,19,20,21,22] }], page: 52 },
            { range: [{ slug: "2-ne", chapters: [1,2] }], page: 60 },
            { range: [{ slug: "2-ne", chapters: [3,4,5] }], page: 70 },
            { range: [{ slug: "2-ne", chapters: [6,7,8,9,10] }], page: 76 },
            { range: [{ slug: "2-ne", chapters: Array.from({length:15}, (_,i)=>i+11) }], page: 90 },
            { range: [{ slug: "2-ne", chapters: [26,27,28,29,30] }], page: 100 },
            { range: [{ slug: "2-ne", chapters: [31,32,33] }], page: 108 },
            { range: [{ slug: "jacob", chapters: [1,2,3,4] }], page: 114 },
            { range: [{ slug: "jacob", chapters: [5,6,7] }], page: 122 },
            { range: [{ slug: "enos", chapters: [1]}, {slug:"jarom", chapters:[1]}, {slug:"omni", chapters:[1]}, {slug:"w-of-m", chapters:[1]}], page: 130 },
            { range: [{ slug: "mosiah", chapters: [1,2,3] }], page: 136 },
            { range: [{ slug: "mosiah", chapters: [4,5,6] }], page: 146 },
            { range: [{ slug: "mosiah", chapters: [7,8,9,10,11] }], page: 160 },
            { range: [{ slug: "mosiah", chapters: [12,13,14,15,16,17] }], page: 164 },
            { range: [{ slug: "mosiah", chapters: [18,19,20,21,22,23,24] }], page: 176 },
            { range: [{ slug: "mosiah", chapters: [25,26,27,28]}, {slug: "alma", chapters: [36]}], page: 180 },
            { range: [{ slug: "mosiah", chapters: [29]}, {slug:"alma", chapters:[1,2,3,4]}], page: 190 },
            { range: [{ slug: "alma", chapters: [5,6,7] }], page: 196 },
            { range: [{ slug: "alma", chapters: [8,9,10,11,12] }], page: 204 },
            { range: [{ slug: "alma", chapters: [13,14,15,16] }], page: 212 },
            { range: [{ slug: "alma", chapters: [17,18,19,20,21,22] }], page: 218 },
            { range: [{ slug: "alma", chapters: [23,24,25,26,27,28,29] }], page: 224 },
            { range: [{ slug: "alma", chapters: [30,31] }], page: 230 },
            { range: [{ slug: "alma", chapters: [32,33,34,35] }], page: 236 },
            { range: [{ slug: "alma", chapters: [36,37,38,39] }], page: 250 },
            { range: [{ slug: "alma", chapters: [40,41,42] }], page: 256 },
            { range: [{ slug: "alma", chapters: [43,44,45,46,47,48,49,50,51,52] }], page: 262 },
            { range: [{ slug: "alma", chapters: [53,54,55,56,57,58,59,60,61,62,63] }], page: 266 },
            { range: [{ slug: "hel", chapters: [1,2,3,4,5] }], page: 270 },
            { range: [{ slug: "hel", chapters: [6,7,8,9,10,11,12] }], page: 278 },
            { range: [{ slug: "hel", chapters: [13,14,15,16] }], page: 288 },
            { range: [{ slug: "3-ne", chapters: [1,2,3,4,5,6,7] }], page: 294 },
            { range: [{ slug: "3-ne", chapters: [8,9,10,11] }], page: 298 },
            { range: [{ slug: "3-ne", chapters: [12,13,14,15] }], page: 304 },
            { range: [{ slug: "3-ne", chapters: [17,18,19] }], page: 318 },
            { range: [{ slug: "3-ne", chapters: [16,20,21] }], page: 324 },
            { range: [{ slug: "3-ne", chapters: [22,23,24,25,26] }], page: 328 },
            { range: [{ slug: "3-ne", chapters: [27,28,29,30]}, {slug:"4-ne", chapters:[1]}], page: 332 },
            { range: [{ slug: "morm", chapters: [1,2,3,4,5,6]}, {slug:"moro", chapters:[9]}], page: 338 },
            { range: [{ slug: "morm", chapters: [7,8,9] }], page: 344 },
            { range: [{ slug: "ether", chapters: [1,2,3,4,5,6] }], page: 350 },
            { range: [{ slug: "ether", chapters: [7,8,9,10,11,12,13,14,15] }], page: 356 },
            { range: [{ slug: "moro", chapters: [1,2,3,4,5,6] }], page: 360 },
            { range: [{ slug: "moro", chapters: [7,8,10] }], page: 364 }
        ];

        const studentManualMappings = [
            { range: [{ slug: "1-ne", chapters: [1, 2, 3, 4, 5] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-2-1-nephi-1-5?lang=eng" },
            { range: [{ slug: "1-ne", chapters: [6, 7, 8, 9, 10, 11] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-3-1-nephi-6-11?lang=eng" },
            { range: [{ slug: "1-ne", chapters: [12, 13, 14, 15] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-4-1-nephi-12-15?lang=eng" },
            { range: [{ slug: "1-ne", chapters: [16, 17, 18] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-5-1-nephi-16-18?lang=eng" },
            { range: [{ slug: "1-ne", chapters: [19, 20, 21, 22] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-6-1-nephi-19-22?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [1, 2, 3] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-7-2-nephi-1-3?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [4, 5, 6, 7, 8] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-8-2-nephi-4-8?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [9, 10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-9-2-nephi-9-10?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [11, 12, 13, 14, 15, 16] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-10-2-nephi-11-16?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [17, 18, 19, 20, 21, 22, 23, 24] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-11-2-nephi-17-24?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [25, 26, 27] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-12-2-nephi-25-27?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [28, 29, 30] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-13-2-nephi-28-30?lang=eng" },
            { range: [{ slug: "2-ne", chapters: [31, 32, 33] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-14-2-nephi-31-33?lang=eng" },
            { range: [{ slug: "jacob", chapters: [1, 2, 3, 4] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-15-jacob-1-4?lang=eng" },
            { range: [{ slug: "jacob", chapters: [5, 6, 7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-16-jacob-5-7?lang=eng" },
            { range: [{ slug: "enos", chapters: [1] }, { slug: "jarom", chapters: [1] }, { slug: "omni", chapters: [1] }, { slug: "w-of-m", chapters: [1] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-17-enos-words-of-mormon?lang=eng" },
            { range: [{ slug: "mosiah", chapters: [1, 2, 3] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-18-mosiah-1-3?lang=eng" },
            { range: [{ slug: "mosiah", chapters: [4, 5, 6, 7, 8] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-19-mosiah-4-8?lang=eng" },
            { range: [{ slug: "mosiah", chapters: [9, 10, 11, 12, 13, 14, 15, 16, 17] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-20-mosiah-9-17?lang=eng" },
            { range: [{ slug: "mosiah", chapters: [18, 19, 20, 21, 22, 23, 24] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-21-mosiah-18-24?lang=eng" },
            { range: [{ slug: "mosiah", chapters: [25, 26, 27, 28, 29] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-22-mosiah-25-29?lang=eng" },
            { range: [{ slug: "alma", chapters: [1, 2, 3, 4] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-23-alma-1-4?lang=eng" },
            { range: [{ slug: "alma", chapters: [5, 6, 7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-24-alma-5-7?lang=eng" },
            { range: [{ slug: "alma", chapters: [8, 9, 10, 11, 12] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-25-alma-8-12?lang=eng" },
            { range: [{ slug: "alma", chapters: [13, 14, 15, 16] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-26-alma-13-16?lang=eng" },
            { range: [{ slug: "alma", chapters: [17, 18, 19, 20, 21, 22] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-27-alma-17-22?lang=eng" },
            { range: [{ slug: "alma", chapters: [23, 24, 25, 26, 27, 28, 29] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-28-alma-23-29?lang=eng" },
            { range: [{ slug: "alma", chapters: [30, 31] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-29-alma-30-31?lang=eng" },
            { range: [{ slug: "alma", chapters: [32, 33, 34, 35] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-30-alma-32-35?lang=eng" },
            { range: [{ slug: "alma", chapters: [36, 37, 38, 39] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-31-alma-36-39?lang=eng" },
            { range: [{ slug: "alma", chapters: [40, 41, 42] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-32-alma-40-42?lang=eng" },
            { range: [{ slug: "alma", chapters: [43, 44, 45, 46, 47, 48, 49, 50, 51] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-33-alma-43-51?lang=eng" },
            { range: [{ slug: "alma", chapters: [52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-34-alma-52-63?lang=eng" },
            { range: [{ slug: "hel", chapters: [1, 2, 3, 4] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-35-helaman-1-4?lang=eng" },
            { range: [{ slug: "hel", chapters: [5, 6, 7, 8, 9] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-36-helaman-5-9?lang=eng" },
            { range: [{ slug: "hel", chapters: [10, 11, 12] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-37-helaman-10-12?lang=eng" },
            { range: [{ slug: "hel", chapters: [13, 14, 15, 16] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-38-helaman-13-16?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [1, 2, 3, 4, 5, 6, 7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-39-3-nephi-1-7?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [8, 9, 10, 11] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-40-3-nephi-8-11?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [12, 13, 14] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-41-3-nephi-12-14?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [15, 16, 17] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-42-3-nephi-15-17?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [18, 19] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-43-3-nephi-18-19?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [20, 21, 22] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-44-3-nephi-20-22?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [23, 24, 25, 26] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-45-3-nephi-23-26?lang=eng" },
            { range: [{ slug: "3-ne", chapters: [27, 28, 29, 30] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-46-3-nephi-27-30?lang=eng" },
            { range: [{ slug: "4-ne", chapters: [1] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-47-4-nephi?lang=eng" },
            { range: [{ slug: "morm", chapters: [1, 2, 3, 4, 5, 6] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-48-mormon-1-6?lang=eng" },
            { range: [{ slug: "morm", chapters: [7, 8, 9] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-49-mormon-7-9?lang=eng" },
            { range: [{ slug: "ether", chapters: [1, 2, 3, 4, 5] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-50-ether-1-5?lang=eng" },
            { range: [{ slug: "ether", chapters: [6, 7, 8, 9, 10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-51-ether-6-10?lang=eng" },
            { range: [{ slug: "ether", chapters: [11, 12, 13, 14, 15] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-52-ether-11-15?lang=eng" },
            { range: [{ slug: "moro", chapters: [1, 2, 3, 4, 5, 6] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-53-moroni-1-6?lang=eng" },
            { range: [{ slug: "moro", chapters: [7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-54-moroni-7?lang=eng" },
            { range: [{ slug: "moro", chapters: [8, 9] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-55-moroni-8-9?lang=eng" },
            { range: [{ slug: "moro", chapters: [10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-student-manual/chapter-56-moroni-10?lang=eng" }
        ];

        const bookOfMormonCentralMappings = [
            { range: [{ slug: "1-ne", chapters: [1, 2, 3, 4, 5] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/1-nephi-1-5?pId=36&sId=101" },
            { range: [{ slug: "1-ne", chapters: [6, 7, 8, 9, 10] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/1-nephi-6-10?pId=36&sId=102" },
            { range: [{ slug: "1-ne", chapters: [11, 12, 13, 14, 15] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/1-nephi-11-15?pId=36&sId=103" },
            { range: [{ slug: "1-ne", chapters: [16, 17, 18, 19, 20, 21, 22] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/1-nephi-16-22?pId=36&sId=104" },
            { range: [{ slug: "2-ne", chapters: [1, 2] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-1-2?pId=36&sId=105" },
            { range: [{ slug: "2-ne", chapters: [3, 4, 5] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-3-5?pId=36&sId=106" },
            { range: [{ slug: "2-ne", chapters: [6, 7, 8, 9, 10] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-6-10?pId=36&sId=107" },
            { range: [{ slug: "2-ne", chapters: [11, 12, 13, 14, 15, 16, 17, 18, 19] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-11-19?pId=36&sId=108" },
            { range: [{ slug: "2-ne", chapters: [20, 21, 22, 23, 24, 25] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-20-25?pId=36&sId=109" },
            { range: [{ slug: "2-ne", chapters: [26, 27, 28, 29, 30] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-26-30?pId=36&sId=110" },
            { range: [{ slug: "2-ne", chapters: [31, 32, 33] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/2-nephi-31-33?pId=36&sId=111" },
            { range: [{ slug: "jacob", chapters: [1, 2, 3, 4] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/jacob-1-4?pId=36&sId=113" },
            { range: [{ slug: "jacob", chapters: [5, 6, 7] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/jacob-5-7?pId=36&sId=114" },
            { range: [{ slug: "enos", chapters: [1] }, { slug: "jarom", chapters: [1] }, { slug: "omni", chapters: [1] }, { slug: "w-of-m", chapters: [1] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/enos-words-of-mormon?pId=36&sId=115" },
            { range: [{ slug: "mosiah", chapters: [1, 2, 3] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-1-3?pId=36&sId=116" },
            { range: [{ slug: "mosiah", chapters: [4, 5, 6] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-4-6?pId=36&sId=117" },
            { range: [{ slug: "mosiah", chapters: [7, 8, 9, 10] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-7-10?pId=36&sId=118" },
            { range: [{ slug: "mosiah", chapters: [11, 12, 13, 14, 15, 16, 17] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-11-17?pId=36&sId=119" },
            { range: [{ slug: "mosiah", chapters: [18, 19, 20, 21, 22, 23, 24] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-18-24?pId=36&sId=120" },
            { range: [{ slug: "mosiah", chapters: [25, 26, 27, 28] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-25-28?pId=36&sId=121" },
            { range: [{ slug: "mosiah", chapters: [29] }, { slug: "alma", chapters: [1, 2, 3, 4] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mosiah-29-alma-4?pId=36&sId=122" },
            { range: [{ slug: "alma", chapters: [5, 6, 7] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-5-7?pId=36&sId=123" },
            { range: [{ slug: "alma", chapters: [8, 9, 10, 11, 12] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-8-12?pId=36&sId=124" },
            { range: [{ slug: "alma", chapters: [13, 14, 15, 16] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-13-16?pId=36&sId=125" },
            { range: [{ slug: "alma", chapters: [17, 18, 19, 20, 21, 22] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-17-22?pId=36&sId=126" },
            { range: [{ slug: "alma", chapters: [23, 24, 25, 26, 27, 28, 29] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-23-29?pId=36&sId=127" },
            { range: [{ slug: "alma", chapters: [30, 31] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-30-31?pId=36&sId=128" },
            { range: [{ slug: "alma", chapters: [32, 33, 34, 35] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-32-35?pId=36&sId=129" },
            { range: [{ slug: "alma", chapters: [36, 37, 38] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-36-38?pId=36&sId=130" },
            { range: [{ slug: "alma", chapters: [39, 40, 41, 42] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-39-42?pId=36&sId=131" },
            { range: [{ slug: "alma", chapters: [43, 44, 45, 46, 47, 48, 49, 50, 51, 52] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-43-52?pId=36&sId=132" },
            { range: [{ slug: "alma", chapters: [53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/alma-53-63?pId=36&sId=133" },
            { range: [{ slug: "hel", chapters: [1, 2, 3, 4, 5, 6] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/helaman-1-6?pId=36&sId=134" },
            { range: [{ slug: "hel", chapters: [7, 8, 9, 10, 11, 12] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/helaman-7-12?pId=36&sId=135" },
            { range: [{ slug: "hel", chapters: [13, 14, 15, 16] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/helaman-13-16?pId=36&sId=136" },
            { range: [{ slug: "3-ne", chapters: [1, 2, 3, 4, 5, 6, 7] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/3-nephi-1-7?pId=36&sId=137" },
            { range: [{ slug: "3-ne", chapters: [8, 9, 10, 11] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/3-nephi-8-11?pId=36&sId=138" },
            { range: [{ slug: "3-ne", chapters: [12, 13, 14, 15, 16] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/3-nephi-12-16?pId=36&sId=139" },
            { range: [{ slug: "3-ne", chapters: [17, 18, 19] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/3-nephi-17-19?pId=36&sId=140" },
            { range: [{ slug: "3-ne", chapters: [20, 21, 22, 23, 24, 25, 26] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/3-nephi-20-26?pId=36&sId=141" },
            { range: [{ slug: "3-ne", chapters: [27, 28, 29, 30] }, { slug: "4-ne", chapters: [1] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/3-nephi-27-4-nephi?pId=36&sId=142" },
            { range: [{ slug: "morm", chapters: [1, 2, 3, 4, 5, 6] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mormon-1-6?pId=36&sId=143" },
            { range: [{ slug: "morm", chapters: [7, 8, 9] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/mormon-7-9?pId=36&sId=144" },
            { range: [{ slug: "ether", chapters: [1, 2, 3, 4, 5] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/ether-1-5?pId=36&sId=145" },
            { range: [{ slug: "ether", chapters: [6, 7, 8, 9, 10, 11] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/ether-6-11?pId=36&sId=146" },
            { range: [{ slug: "ether", chapters: [12, 13, 14, 15] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/ether-12-15?pId=36&sId=147" },
            { range: [{ slug: "moro", chapters: [1, 2, 3, 4, 5, 6] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/moroni-1-6?pId=36&sId=148" },
            { range: [{ slug: "moro", chapters: [7, 8, 9] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/moroni-7-9?pId=36&sId=149" },
            { range: [{ slug: "moro", chapters: [10] }], url: "https://scripturecentral.org/come-follow-me/book-of-mormon-2024/moroni-10?pId=36&sId=150" }
        ];

        const comeFollowMeManualMappings = [
            { lesson: 2, range: [{ slug: "1-ne", chapters: [1, 2, 3, 4, 5] }] },
            { lesson: 3, range: [{ slug: "1-ne", chapters: [6, 7, 8, 9, 10] }] },
            { lesson: 4, range: [{ slug: "1-ne", chapters: [11, 12, 13, 14, 15] }] },
            { lesson: 5, range: [{ slug: "1-ne", chapters: [16, 17, 18, 19, 20, 21, 22] }] },
            { lesson: 6, range: [{ slug: "2-ne", chapters: [1, 2] }] },
            { lesson: 7, range: [{ slug: "2-ne", chapters: [3, 4, 5] }] },
            { lesson: 8, range: [{ slug: "2-ne", chapters: [6, 7, 8, 9, 10] }] },
            { lesson: 9, range: [{ slug: "2-ne", chapters: [11, 12, 13, 14, 15, 16, 17, 18, 19] }] },
            { lesson: 10, range: [{ slug: "2-ne", chapters: [20, 21, 22, 23, 24, 25] }] },
            { lesson: 11, range: [{ slug: "2-ne", chapters: [26, 27, 28, 29, 30] }] },
            { lesson: 12, range: [{ slug: "2-ne", chapters: [31, 32, 33] }] },
            { lesson: 14, range: [{ slug: "jacob", chapters: [1, 2, 3, 4] }] },
            { lesson: 15, range: [{ slug: "jacob", chapters: [5, 6, 7] }] },
            { lesson: 16, range: [{ slug: "enos", chapters: [1] }, { slug: "jarom", chapters: [1] }, { slug: "omni", chapters: [1] }, { slug: "w-of-m", chapters: [1] }] },
            { lesson: 17, range: [{ slug: "mosiah", chapters: [1, 2, 3] }] },
            { lesson: 18, range: [{ slug: "mosiah", chapters: [4, 5, 6] }] },
            { lesson: 19, range: [{ slug: "mosiah", chapters: [7, 8, 9, 10] }] },
            { lesson: 20, range: [{ slug: "mosiah", chapters: [11, 12, 13, 14, 15, 16, 17] }] },
            { lesson: 21, range: [{ slug: "mosiah", chapters: [18, 19, 20, 21, 22, 23, 24] }] },
            { lesson: 22, range: [{ slug: "mosiah", chapters: [25, 26, 27, 28] }] },
            { lesson: 23, range: [{ slug: "mosiah", chapters: [29] }, { slug: "alma", chapters: [1, 2, 3, 4] }] },
            { lesson: 24, range: [{ slug: "alma", chapters: [5, 6, 7] }] },
            { lesson: 25, range: [{ slug: "alma", chapters: [8, 9, 10, 11, 12] }] },
            { lesson: 26, range: [{ slug: "alma", chapters: [13, 14, 15, 16] }] },
            { lesson: 27, range: [{ slug: "alma", chapters: [17, 18, 19, 20, 21, 22] }] },
            { lesson: 28, range: [{ slug: "alma", chapters: [23, 24, 25, 26, 27, 28, 29] }] },
            { lesson: 29, range: [{ slug: "alma", chapters: [30, 31] }] },
            { lesson: 30, range: [{ slug: "alma", chapters: [32, 33, 34, 35] }] },
            { lesson: 31, range: [{ slug: "alma", chapters: [36, 37, 38] }] },
            { lesson: 32, range: [{ slug: "alma", chapters: [39, 40, 41, 42] }] },
            { lesson: 33, range: [{ slug: "alma", chapters: [43, 44, 45, 46, 47, 48, 49, 50, 51, 52] }] },
            { lesson: 34, range: [{ slug: "alma", chapters: [53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63] }] },
            { lesson: 35, range: [{ slug: "hel", chapters: [1, 2, 3, 4, 5, 6] }] },
            { lesson: 36, range: [{ slug: "hel", chapters: [7, 8, 9, 10, 11, 12] }] },
            { lesson: 37, range: [{ slug: "hel", chapters: [13, 14, 15, 16] }] },
            { lesson: 38, range: [{ slug: "3-ne", chapters: [1, 2, 3, 4, 5, 6, 7] }] },
            { lesson: 39, range: [{ slug: "3-ne", chapters: [8, 9, 10, 11] }] },
            { lesson: 40, range: [{ slug: "3-ne", chapters: [12, 13, 14, 15, 16] }] },
            { lesson: 41, range: [{ slug: "3-ne", chapters: [17, 18, 19] }] },
            { lesson: 42, range: [{ slug: "3-ne", chapters: [20, 21, 22, 23, 24, 25, 26] }] },
            { lesson: 43, range: [{ slug: "3-ne", chapters: [27, 28, 29, 30] }, { slug: "4-ne", chapters: [1] }] },
            { lesson: 44, range: [{ slug: "morm", chapters: [1, 2, 3, 4, 5, 6] }] },
            { lesson: 45, range: [{ slug: "morm", chapters: [7, 8, 9] }] },
            { lesson: 46, range: [{ slug: "ether", chapters: [1, 2, 3, 4, 5] }] },
            { lesson: 47, range: [{ slug: "ether", chapters: [6, 7, 8, 9, 10, 11] }] },
            { lesson: 48, range: [{ slug: "ether", chapters: [12, 13, 14, 15] }] },
            { lesson: 49, range: [{ slug: "moro", chapters: [1, 2, 3, 4, 5, 6] }] },
            { lesson: 50, range: [{ slug: "moro", chapters: [7, 8, 9] }] },
            { lesson: 51, range: [{ slug: "moro", chapters: [10] }] }
        ];

        // DOM elements
        const selectorPage = document.getElementById('selector-page');
        const lectioPage = document.getElementById('lectio-page');
        const bookSelect = document.getElementById('book-select');
        const chapterSelect = document.getElementById('chapter-select');
        const lectioTitle = document.getElementById('lectio-title');
        const resourcesContainer = document.getElementById('resources-container');

        // Utility functions
        function findLessonPage(slug, chapter) {
            for (const lesson of LESSON_PAGES) {
                for (const entry of lesson.range) {
                    if (entry.slug === slug && entry.chapters.includes(chapter)) {
                        return lesson.page;
                    }
                }
            }
            return null;
        }

        function findSeminaryManualUrl(slug, chapter) {
            // Seminary Student Manual 2024 chapter groupings
            const seminaryMappings = [
                { range: [{ slug: "1-ne", chapters: [1,2,3,4,5] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/03-1-nephi-1-5/031-student?lang=eng" },
                { range: [{ slug: "1-ne", chapters: [6,7,8,9,10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/04-1-nephi-6-10/041-student?lang=eng" },
                { range: [{ slug: "1-ne", chapters: [11,12,13,14,15] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/05-1-nephi-11-15/051-student?lang=eng" },
                { range: [{ slug: "1-ne", chapters: [16,17,18,19,20,21,22] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/06-1-nephi-16-22/061-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [1,2] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/07-2-nephi-1-2/071-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [3,4,5] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/08-2-nephi-3-5/081-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [6,7,8,9,10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/09-2-nephi-6-10/091-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [11,12,13,14,15,16,17,18,19] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/10-2-nephi-11-19/101-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [20,21,22,23,24,25] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/11-2-nephi-20-25/111-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [26,27,28,29,30] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/12-2-nephi-26-30/121-student?lang=eng" },
                { range: [{ slug: "2-ne", chapters: [31,32,33] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/13-2-nephi-31-33/131-student?lang=eng" },
                { range: [{ slug: "jacob", chapters: [1,2,3,4] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/14-jacob-1-4/141-student?lang=eng" },
                { range: [{ slug: "jacob", chapters: [5,6,7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/15-jacob-5-7/151-student?lang=eng" },
                { range: [{ slug: "enos", chapters: [1] }, { slug: "jarom", chapters: [1] }, { slug: "omni", chapters: [1] }, { slug: "w-of-m", chapters: [1] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/16-enos-words-of-mormon/161-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [1,2,3] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/17-mosiah-1-3/171-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [4,5,6] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/18-mosiah-4-6/181-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [7,8,9,10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/19-mosiah-7-10/191-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [11,12,13,14,15,16,17] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/20-mosiah-11-17/201-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [18,19,20,21,22,23,24] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/21-mosiah-18-24/211-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [25,26,27,28] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/22-mosiah-25-28/221-student?lang=eng" },
                { range: [{ slug: "mosiah", chapters: [29] }, { slug: "alma", chapters: [1,2,3,4] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/23-mosiah-29-alma-4/231-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [5,6,7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/24-alma-5-7/241-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [8,9,10,11,12] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/25-alma-8-12/251-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [13,14,15,16] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/26-alma-13-16/261-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [17,18,19,20,21,22] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/27-alma-17-22/271-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [23,24,25,26,27,28,29] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/28-alma-23-29/281-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [30,31] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/29-alma-30-31/291-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [32,33,34,35] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/30-alma-32-35/301-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [36,37,38] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/31-alma-36-38/311-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [39,40,41,42] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/32-alma-39-42/321-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [43,44,45,46,47,48,49,50,51,52] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/33-alma-43-52/331-student?lang=eng" },
                { range: [{ slug: "alma", chapters: [53,54,55,56,57,58,59,60,61,62,63] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/34-alma-53-63/341-student?lang=eng" },
                { range: [{ slug: "hel", chapters: [1,2,3,4,5,6] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/35-helaman-1-6/351-student?lang=eng" },
                { range: [{ slug: "hel", chapters: [7,8,9,10,11,12] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/36-helaman-7-12/361-student?lang=eng" },
                { range: [{ slug: "hel", chapters: [13,14,15,16] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/37-helaman-13-16/371-student?lang=eng" },
                { range: [{ slug: "3-ne", chapters: [1,2,3,4,5,6,7] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/38-3-nephi-1-7/381-student?lang=eng" },
                { range: [{ slug: "3-ne", chapters: [8,9,10,11] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/39-3-nephi-8-11/391-student?lang=eng" },
                { range: [{ slug: "3-ne", chapters: [12,13,14,15,16] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/40-3-nephi-12-16/401-student?lang=eng" },
                { range: [{ slug: "3-ne", chapters: [17,18,19] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/41-3-nephi-17-19/411-student?lang=eng" },
                { range: [{ slug: "3-ne", chapters: [20,21,22,23,24,25,26] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/42-3-nephi-20-26/421-student?lang=eng" },
                { range: [{ slug: "3-ne", chapters: [27,28,29,30] }, { slug: "4-ne", chapters: [1] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/43-3-nephi-27-4-nephi-1/431-student?lang=eng" },
                { range: [{ slug: "morm", chapters: [1,2,3,4,5,6] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/44-mormon-1-6/441-student?lang=eng" },
                { range: [{ slug: "morm", chapters: [7,8,9] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/45-mormon-7-9/451-student?lang=eng" },
                { range: [{ slug: "ether", chapters: [1,2,3,4,5] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/46-ether-1-5/461-student?lang=eng" },
                { range: [{ slug: "ether", chapters: [6,7,8,9,10,11] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/47-ether-6-11/471-student?lang=eng" },
                { range: [{ slug: "ether", chapters: [12,13,14,15] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/48-ether-12-15/481-student?lang=eng" },
                { range: [{ slug: "moro", chapters: [1,2,3,4,5,6] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/49-moroni-1-6/491-student?lang=eng" },
                { range: [{ slug: "moro", chapters: [7,8,9] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/50-moroni-7-9/501-student?lang=eng" },
                { range: [{ slug: "moro", chapters: [10] }], url: "https://www.churchofjesuschrist.org/study/manual/book-of-mormon-seminary-student-manual-2024/51-moroni-10/511-student?lang=eng" }
            ];

            for (const mapping of seminaryMappings) {
                for (const entry of mapping.range) {
                    if (entry.slug === slug && entry.chapters.includes(chapter)) {
                        return mapping.url;
                    }
                }
            }
            return null;
        }

        function findStudentManualUrl(slug, chapter) {
            for (const mapping of studentManualMappings) {
                for (const entry of mapping.range) {
                    if (entry.slug === slug && entry.chapters.includes(chapter)) {
                        return mapping.url;
                    }
                }
            }
            return null;
        }

        function findBookOfMormonCentralUrl(slug, chapter) {
            for (const mapping of bookOfMormonCentralMappings) {
                for (const entry of mapping.range) {
                    if (entry.slug === slug && entry.chapters.includes(chapter)) {
                        return mapping.url;
                    }
                }
            }
            return null;
        }
        
        function findComeFollowMeManualUrl(slug, chapter) {
            for (const mapping of comeFollowMeManualMappings) {
                for (const entry of mapping.range) {
                    if (entry.slug === slug && entry.chapters.includes(chapter)) {
                        const lessonNumber = String(mapping.lesson).padStart(2, '0');
                        return `https://www.churchofjesuschrist.org/study/manual/come-follow-me-for-home-and-church-book-of-mormon-2024/${lessonNumber}?lang=eng`;
                    }
                }
            }
            return null;
        }

        function createResourceCategory(title, buttons) {
            if (buttons.filter(Boolean).length === 0) return null;
            
            const category = document.createElement('div');
            category.className = 'resource-category';
            
            const categoryTitle = document.createElement('h3');
            categoryTitle.className = 'category-title';
            categoryTitle.textContent = title;
            
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'category-buttons';
            
            buttons.forEach(button => {
                if (button) buttonContainer.appendChild(button);
            });
            
            category.appendChild(categoryTitle);
            category.appendChild(buttonContainer);
            
            return category;
        }

        function createButton(text, url, className) {
            const button = document.createElement('a');
            button.href = url;
            button.target = '_blank';
            button.rel = 'noopener noreferrer';
            button.className = `resource-button ${className}`;
            button.textContent = text;
            return button;
        }

        // Initialize app
        function init() {
            populateBooks();
            setupEventListeners();
            handleRouting();
        }

        function populateBooks() {
            BOM_BOOKS.forEach(book => {
                const option = document.createElement('option');
                option.value = book.slug;
                option.textContent = book.name;
                bookSelect.appendChild(option);
            });
            handleBookChange();
        }

        function setupEventListeners() {
            bookSelect.addEventListener('change', handleBookChange);
            window.addEventListener('hashchange', handleRouting);
        }

        function handleBookChange() {
            const selectedSlug = bookSelect.value;
            const selectedBook = BOM_BOOKS.find(book => book.slug === selectedSlug);
            
            chapterSelect.innerHTML = '';
            
            if (selectedBook) {
                for (let i = 1; i <= selectedBook.chapters; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i;
                    chapterSelect.appendChild(option);
                }
                chapterSelect.value = 1;
            }
        }

        function startLectio() {
            const selectedSlug = bookSelect.value;
            const selectedChapter = parseInt(chapterSelect.value, 10);
            
            if (selectedSlug && selectedChapter) {
                window.location.hash = `#/bofm/${selectedSlug}/${selectedChapter}`;
            }
        }

        function handleRouting() {
            const hash = window.location.hash || "";
            const match = hash.match(/^#\/bofm\/([^/]+)\/(\d+)$/);
            
            if (match) {
                const route = { slug: match[1], chapter: parseInt(match[2], 10) };
                showLectioPage(route);
            } else {
                showSelectorPage();
            }
        }

        function showSelectorPage() {
            selectorPage.style.display = 'block';
            lectioPage.style.display = 'none';
        }

        function showLectioPage(route) {
            const book = BOM_BOOKS.find(b => b.slug === route.slug);
            if (!book) {
                showSelectorPage();
                return;
            }

            const title = `${book.name} ${route.chapter}`;
            lectioTitle.textContent = `${title} ‚Äî Lectio`;

            // Clear previous resources
            resourcesContainer.innerHTML = '';

            // Build URLs
            const glUrl = `https://www.churchofjesuschrist.org/study/scriptures/bofm/${route.slug}/${route.chapter}?lang=eng`;
            const onlineUrl = `https://bookofmormon.online/read/${route.slug}.${route.chapter}`;
            const learningToLoveUrl = `https://clearldsdoctrine.neocities.org/ltltbom/${route.slug}/${route.chapter}`;
            const chatGptUrl = `https://chatgpt.com/?q=${encodeURIComponent(`Tell me more about ${book.name} ${route.chapter} in the Book of Mormon`)}`;
            const lessonPage = findLessonPage(route.slug, route.chapter);
            const harderUrl = lessonPage ? `https://scholarsarchive.byu.edu/cgi/viewcontent.cgi?article=1015&context=mi#page=${lessonPage}` : null;
            const seminaryManualUrl = findSeminaryManualUrl(route.slug, route.chapter);
            const studentManualUrl = findStudentManualUrl(route.slug, route.chapter);
            const bookOfMormonCentralUrl = findBookOfMormonCentralUrl(route.slug, route.chapter);
            const citationIndexUrl = 'https://scriptures.byu.edu/#::c';
            const tabernacleChoirUrl = 'https://www.churchofjesuschrist.org/media/radio/tabernacle-choir-stream?lang=eng';
            const ldsBotUrl = 'https://ldsbot.com';
            const comeFollowMeManualUrl = findComeFollowMeManualUrl(route.slug, route.chapter);

            // Create and append resource categories
            const categories = [
                createResourceCategory('Translations', [
                    createButton('Open in Gospel Library', glUrl, 'gospel-library')
                ]),
                createResourceCategory('Come Follow Me', [
                    comeFollowMeManualUrl && createButton('Come, Follow Me‚ÄîFor Home and Church', comeFollowMeManualUrl, 'come-follow-me-manual'),
                    bookOfMormonCentralUrl && createButton('Book of Mormon Central', bookOfMormonCentralUrl, 'book-of-mormon-central')
                ]),
                createResourceCategory('Study Questions', [
                    harderUrl && createButton('Book of Mormon Made Harder', harderUrl, 'book-harder'),
                    seminaryManualUrl && createButton('Book of Mormon Seminary Student Manual (2024)', seminaryManualUrl, 'seminary-manual'),
                    studentManualUrl && createButton('Book of Mormon Student Manual', studentManualUrl, 'student-manual')
                ]),
                createResourceCategory('Incredible Tools', [
                    createButton('Book of Mormon Online', onlineUrl, 'book-online'),
                    createButton('Learning to Love', learningToLoveUrl, 'learning-to-love'),
                    citationIndexUrl && createButton('Scripture Citation Index', citationIndexUrl, 'scripture-citation-index')
                ]),
                createResourceCategory('AI', [
                    createButton('Ask ChatGPT', chatGptUrl, 'chatgpt'),
                    createButton('LDSBot', ldsBotUrl, 'ldsbot')
                ]),
                createResourceCategory('Ambience', [
                    createButton('myNoise¬Æ', 'https://mynoise.net/noiseMachines.php', 'mynoise'),
                    createButton('Tabernacle Choir Stream', tabernacleChoirUrl, 'tabernacle-choir')
                ])
            ];

            categories.forEach(cat => {
                if (cat) resourcesContainer.appendChild(cat);
            });

            selectorPage.style.display = 'none';
            lectioPage.style.display = 'block';
        }

        function backToSelector() {
            window.location.hash = '';
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>


